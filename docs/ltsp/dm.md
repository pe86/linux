# Οθόνη σύνδεσης

Το αρχείο ρυθμίσεων `ltsp.conf` δίνει τις παρακάτω δυνατότητες παραμετροποίησης
της οθόνης σύνδεσης (login screen **LightDM**) των σταθμών εργασίας. Όμως,
γίνονται οι παρακάτω υποθέσεις:

- Να έχουν [δοθεί στατικά hostnames](hostnames.md) τύπου `pc01`, `pc02` κλπ σε
  όλους τους LTSP clients.
- Στα παραδείγματα υποθέτουμε ότι οι λογαριασμοί των χρηστών είναι της μορφής
  `a1-01` που σημαίνει "τάξη a τμήμα 1 υπολογιστής 01".
- Αντίστοιχα, οι λογαριασμοί των επισκεπτών ονομάζονται για παράδειγμα
  `guestXX`.

!!! warning "Προσοχή"
    Αυτοί είναι κανονικοί λογαριασμοί όπου όλα τα έγγραφα και οι ρυθμίσεις
    παραμένουν και μετά από επανεκκίνηση, δεν σβήνονται. Χρησιμοποιούνται είτε
    από "επισκέπτες" που δεν έχουν κανονικό λογαριασμό χρήστη, είτε από όλους
    τους χρήστες αν έχουμε μόνο έναν λογαριασμό ανά υπολογιστή.

Από τη [Διαχείριση ΣΕΠΕΗΥ](../glossary/index.md#sch-scripts) ανοίξτε το αρχείο
ρυθμίσεων `ltsp.conf` και ενεργοποιήστε όποιες από τις παρακάτω ρυθμίσεις
ταιριάζουν στην περίπτωσή σας.

## AUTOLOGIN

Η οδηγία `AUTOLOGIN` επιτρέπει σε έναν χρήστη ανά υπολογιστή να συνδέεται
αυτόματα. Για να γίνει αντιστοίχιση του ονόματος υπολογιστή (π.χ. `pc01`) στο
όνομα χρήστη (π.χ. `guest01`), χρησιμοποιείται μια [κανονική
έκφραση](https://en.wikipedia.org/wiki/Regular_expression). Για παράδειγμα, η
παρακάτω οδηγία ορίζει αυτόματη σύνδεση του `guest01` στο `pc01`, του `guest02`
στο `pc02`, κ.ο.κ.:

```text title="/etc/ltsp/ltsp.conf"
[clients]
AUTOLOGIN="^pc\([0-9]*\)$/guest\1"
```

Αν επιθυμείτε να γίνεται αυτόματη σύνδεση για τον χρήστη `user-01` μόνο στον
υπολογιστή με mac-address `[00:19:db:58:7c:5d]` δώστε στο `ltsp.conf` την
οδηγία:

```text title="/etc/ltsp/ltsp.conf"
[00:19:db:58:7c:5d]
AUTOLOGIN="user-01"
```

!!! info "Πληροφορία"
    Εάν χρησιμοποιείτε NFS δεν απαιτείται να δώσετε κωδικό.

Σε περίπτωση που θέλετε να εφαρμόσετε αυτόματη σύνδεση **και για τον LTSP
server**, π.χ. ως χρήστης `guest01`, από [τερματικό](../../glossary/index.md#terminal):

```shell
sudo pluma /etc/lightdm/lightdm.conf
```

με περιεχόμενο:

```text title="/etc/lightdm/lightdm.conf"
[Seat:*]
autologin-user=guest01
```

## LTSPDM_USERS

Η οδηγία `LTSPDM_USERS` καθορίζει ποιοι λογαριασμοί χρηστών θα εμφανίζονται
στην οθόνη σύνδεσης. Για παράδειγμα είναι πολύ βολικό στο `pc01` να εμφανίζεται
μόνο ο ***Επισκέπτης 01*** καθώς φυσικά και το πεδίο όπου μπορεί κάποιος να
γράψει το username του χειρωνακτικά. Αντίστοιχα στο `pc02` θα εμφανίζεται ο
***Επισκέπτης 02*** και το manual login.

Για να γίνει αυτή η αντιστοίχιση από όνομα υπολογιστή HOSTNAME σε όνομα χρήστη,
χρησιμοποιούμε την παρακάτω γραμμή στο `ltsp.conf`:

```text title="/etc/ltsp/ltsp.conf"
[clients]
LTSPDM_USERS="guest-*%{HOSTNAME#pc}"
```

## LTSPDM_CONF

Αν αντίθετα θέλετε να κρύψετε εντελώς τη λίστα χρηστών και να παραμείνει μόνο
η χειρωνακτική σύνδεση, η σχετική παράμετρος είναι:

```text title="/etc/ltsp/ltsp.conf"
[clients]
LIGHTDM_CONF="greeter-hide-users=true"
```

Σε περίπτωση που θέλετε να το εφαρμόσετε **και για τον LTSP server**, από
[τερματικό](../../glossary/index.md#terminal):

```shell
sudo pluma /etc/lightdm/lightdm.conf.d/local.conf
```

με περιεχόμενο:

```text title="/etc/lightdm/lightdm.conf.d/local.conf"
[Seat:*]
greeter-hide-users=true
```

!!! tip "Χρήσιμο"
    Αν το εφαρμόσετε **και για τον LTSP server**, μετά από δημοσίευση εικονικού
    δίσκου, **θα ισχύει και για όλα τα clients**. Σε αυτήν την περίπτωση δεν
    είναι απαραίτητη η αντίστοιχη παράμετρος στο `ltsp.conf`.

## PASSWORDS_GUESTS

Οι οδηγίες τύπου `PASSWORDS_x` επιτρέπουν σε κάποιους λογαριασμούς να
συνδέονται χωρίς κωδικό πρόσβασης, με απλό **`Enter`**, για παράδειγμα:

```text title="/etc/ltsp/ltsp.conf"
[clients]
PASSWORDS_GUESTS="guest[0-9-]*/"
PASSWORDS_CLASSES="[abcdefg][0-9-]*/"
```

## Αυτόματη σύνδεση τμήματος

Ας υποθέσουμε ότι έχουμε ονομάσει τους σταθμούς εργασίας pc01, pc02, ..., και
τους χρήστες `a1-01`, `a1-02`, ..., `b1-01` κλπ. Έρχεται διάλειμμα, φεύγει η
τάξη `a1` και θέλουμε να συνδέσουμε την τάξη `b1`. Μέσα από τον ***Επόπτη***,
επιλέγουμε όλους τους σταθμούς εργασίας και δίνουμε την παρακάτω εντολή:

```shell
sudo /usr/share/sch-scripts/autologin pc/a1-
```

Το script `/usr/share/sch-scripts/autologin` κάνει autologin σε ένα τμήμα, ενώ
δέχεται σαν παράμετρο το όνομα χρήστη, το οποίο μπορεί να είναι ένα από τα
παρακάτω:

- `false`: αποσυνδέει το παλιό τμήμα χωρίς να συνδέσει καινούργιο.
- `teacher1`: συνδέει έναν συγκεκριμένο χρήστη. Αυτό δουλεύει αν έχουμε
  επιλέξει μόνο έναν client.
- `pc/guest`: αν το username περιέχει `/` (slash), τότε θεωρείται κανονική
  έκφραση η οποία αντιστοιχίζει το όνομα του υπολογιστή σε όνομα χρήστη, όπως
  αναφέρθηκε παραπάνω στην ενότητα `AUTOLOGIN`.
